<html>
<head>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="element_lists.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<title>Georgia Rare Natural Elements</title>
<style>
.range_map_button, .natureserve_explorer, .species_profile_button {
	margin: 2px;
	}	
h2{
	width: 880px;
	margin: auto;
}
#listArea{
	padding-bottom: 0.5em;
}
</style>
</head>

<body>
    <header id="headerArea">
		<a href="http://www.georgiawildlife.com"><img id="wrd-logo" class="top-button" src="img/wildlife_resources_logo_white.png" title="Georgia Department of Natural Resources, Wildlife Resources Division" alt="Wildlife Resources Logo"></a>
		<a href="home.html"><img id="portal-logo" class="top-button" src="img/georgia-rare-natural-elements.png" title="Georgia Rare Natural Element Data Portal" alt="Georgia Rare Natural Element Logo"></a>	
	</header>
	<h2>Radius Map List</h2>
	<section id="action-area">
		<a href="customize.html" title="Filter rare elements by ranks, status and element groups. Also choose information to display with each element."><img src="img/customize.png" class="customize_button" alt="Customize appearance of list"></a><a href="element_lists.html?request_src=clear-non-location-filter" title="Remove all filters except the location filter"><img src="img/clear-non-location-filter.png" class="customize_button" alt="Clear Nonlocation filter"></a>
		</section>
    <section>
	<div id="row_count"></div>
    <div id="listArea">
	<ul id="uoList">
	</ul>
	</div>
    </section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
		
		if (localStorage.getItem("radiusmap") === null) {
			console.log("test");
			}
			else{
			var recs = JSON.parse(localStorage.getItem("radiusmap"));
			var testData = "";
			var rowNum = "";
			$.each(recs.rows, function(key, value){
				rowNum = "&nbsp;&nbsp;&nbsp;" + recs.rows.length + " element records in list"
				console.log(value.length);
				var swapStatus = value.swapstatus
				if(value.swapstatus == true){
					swapStatus = "Yes"
				}
				else {
					swapStatus = "No"
				}
				var sname_formatted = value.sname.split(' ').join('+');
				var profileLink = "<a href=profile.html?es_id="+ value.es_id+  "&fus_tab_id="+ value.fus_tab_id + "&group="+ value.header_group + '><img src="img/species_profile.png" class="species_profile_button" alt="species profile button"></a>';
				var rangeLink = '<a href="range_maps2.html?es_id=' + value.es_id + '"title="Range map in Georgia using GA-DNR, Biotics element occurence data" target="_blank"><img src="img/range_map3.png" class="range_map_button" alt="range map button"></a>';
				var exploreLink = '<a href="http://explorer.natureserve.org/servlet/NatureServe?searchName=' + sname_formatted +  '"title="NatureServe Explorer Report for element" target="_blank"><img src="img/natuerserve_explorer_small.png" class="natureserve_explorer" alt="NatureServe button"></a>';

				testData += "<li>" + "<b><i>" + value.sname + " </i></b>(" + value.scomname + "), " + "<b> Rank:</b> " + value.grank + "/" + value.srank +", <b>Ga:</b> " + value.usesa + ", <b>US:</b> " + value.sprot + ", <b>SWAP:</b> " + swapStatus + ", <b>EOs:</b> " + value.eo_count + ", <b>Habitat: </b>" + value.sshabitat + profileLink + rangeLink + exploreLink + "</li>";
			});
			document.getElementById('row_count').innerHTML = rowNum;
			document.getElementById('uoList').innerHTML = testData;
			}
</script>
</body>
</html>