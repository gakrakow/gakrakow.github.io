<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<script src="http://libs.cartocdn.com/cartodb.js/v3/3.11/cartodb.js"></script>
</head>
<style>
<style>

body {
background-color:#403000;
color:#6f4e0f;
font-family:sans-serif;
}

a {
text-decoration: none; /* Gets rid of dirty default underline */
}

img.button, img.top-button {
padding: 5px;
margin: 5px;
border-radius: 10px;
box-shadow: 3px 3px 4px 2px #000000;
}

.range_map_button, .species_profile_button, .natureserve_explorer, .button_link {
position: relative;
top: 2px;
border-radius: 2px;
box-shadow: 1px 1px 1px 1px #000000;
}

</style>



<body onload="makeList()">
    <div id='logo_area'>
        <a href="http://www.georgiawildlife.com"><img id="wrd-logo" class="top-button" src="wildlife_resources_logo_white.png" title="Georgia Department of Natural Resources, Wildlife Resources Division" alt="Wildlife Resources Logo"></a>
        <a href="index.html"><img id="portal-logo" class="top-button" src="georgia rare natural elements data portal.png" title="Georgia Rare Natural Element Data Portal" alt="Georgia Rare Natural Element Logo"></a><img src="img/watched-plants.png" class="top-button" title="Watched Plants"></img>
    </div>
    <h3>Plant Watch List (Taxa not tracked)</h3>
    <h4>Plant taxa for which we are collecting data but not entering locations in our database.</h4>
<div id="listArea"></div>

<script>
function makeList() {
    var sqlQuery = "select elcode, sname, scomname, srank, grank, sshabitat, exportdate from es_web where seotrack = 'W' ORDER BY sname";
	$.getJSON('http://gakrakow.cartodb.com/api/v2/sql?q='+sqlQuery, function(data) {
        var wList = `<p>${data.rows.length} records in list</p>`;
        data.rows.forEach(function(row) {
            let ns_explorer_link = `<a href="http://explorer.natureserve.org/servlet/NatureServe?searchName=${row.sname.split(' ').join('+')}" title="NatureServe Explorer Report for element"><img src="natuerserve_explorer_small.png" class="natureserve_explorer" alt="NatureServe button"></a>`;
            let el_rank = `<span title="Global and state rarity ranks"><b>Rank:</b> ${row.grank}/${row.srank}</span>`;
            wList += `<i>${row.sname}</i>, ${row.scomname}, ${el_rank} ${ns_explorer_link}<br/>`;
        });
        //alert(wList);
        wList += `<p>Exported from Bioitcs Conservation Database on ${data.rows[0].exportdate}</p>`;
        document.getElementById('listArea').innerHTML = wList;
    });
};
</script>

</body>
</html>